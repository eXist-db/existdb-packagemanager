<link rel="import" href="bower_components/polymer/polymer.html">

<dom-module id="repo-version">
  <template>
    <style>
      :host {
        display: block;
      }

      button#install{
        display: table-cell;
        padding:4px;
        margin-left:10px;
      }
/*
      :host:after{
        content:attr(version);
      }
*/
    </style>


    <slot></slot>

    <template is="dom-if" if="{{_hasOtherParent()}}">
      <button id="install" on-click="_triggerInstall">Install</button>
    </template>


  </template>

  <script>
      Polymer({

          is: 'repo-version',

          properties: {
              url:{
                  type:String,
                  reflectToAttribute:true
              },
              abbrev:{
                  type: String,
                  reflectToAttribute:true
              },
              type: {
                  type: String,
                  reflectToAttribute:true
              },
              version:{
                  type:String,
                  reflectToAttribute:true
              }
          },


          attached: function () {

              if(this._hasOtherParent()){
                  this.fire('attachedVersion');
              }

          },

          _hasOtherParent:function () {
//              console.log('_hasOtherParent ',this.parentNode.nodeName.toLowerCase() == 'repo-other');
              return this.parentNode.nodeName.toLowerCase() == 'repo-other';
          },

          _triggerInstall:function (e) {
//              console.log('_triggerInstall', this.version);
              this.fire('requestInstall',{version:this.version});

          }


      });
  </script>
</dom-module>
